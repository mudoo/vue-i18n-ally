<p align="center">
<img src="https://raw.githubusercontent.com/antfu/vue-i18n-ally/master/res/logo.png" alt="logo" width="100"/>
</p>
<h1 align="center">Vue i18n Ally</h1>

<p align="center">
🌍 Better <a href="https://github.com/kazupon/vue-i18n">Vue i18n</a> experiences with VSCode -
<a href="https://github.com/antfu/vue-i18n-ally/blob/master/README.zh-cn.md"><strong>中文文档</strong></a>
</p>

<p align="center">
<a href="https://marketplace.visualstudio.com/items?itemName=antfu.vue-i18n-ally"><img src="https://img.shields.io/visual-studio-marketplace/v/antfu.vue-i18n-ally.svg?color=blue&amp;label=VSCode%20Marketplace&amp;logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiI+PGRlZnM+PHN0eWxlPi5he2ZpbGw6I2ZmZjt9LmEsLmd7ZmlsbC1ydWxlOmV2ZW5vZGQ7fS5ie21hc2s6dXJsKCNhKTt9LmN7ZmlsbDojMDA2NWE5O30uZHtmaWxsOiMwMDdhY2M7fS5le2ZpbGw6IzFmOWNmMDt9LmZ7b3BhY2l0eTowLjI1O30uZ3tmaWxsOnVybCgjYik7fTwvc3R5bGU+PG1hc2sgaWQ9ImEiIHg9Ii0wLjE2IiB5PSIwLjY2IiB3aWR0aD0iMjU2LjE2IiBoZWlnaHQ9IjI1NC42OCIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggY2xhc3M9ImEiIGQ9Ik0xODEuNTMsMjU0LjI1YTE1LjkzLDE1LjkzLDAsMCwwLDEyLjctLjQ5bDUyLjcxLTI1LjM2QTE2LDE2LDAsMCwwLDI1NiwyMTRWNDJhMTYsMTYsMCwwLDAtOS4wNi0xNC40MkwxOTQuMjMsMi4yNEExNS45NCwxNS45NCwwLDAsMCwxNzgsMy43YTE2LjMsMTYuMywwLDAsMC0xLjkxLDEuNjNMNzUuMTUsOTcuMzksMzEuMiw2NGExMC42NSwxMC42NSwwLDAsMC0xMy42MS42MUwzLjQ5LDc3LjQ1YTEwLjY4LDEwLjY4LDAsMCwwLDAsMTUuNzhMNDEuNTksMTI4LDMuNDgsMTYyLjc3YTEwLjY4LDEwLjY4LDAsMCwwLDAsMTUuNzhsMTQuMSwxMi44MkExMC42NSwxMC42NSwwLDAsMCwzMS4yLDE5Mmw0NC0zMy4zNywxMDAuOSw5Mi4wNkExNiwxNiwwLDAsMCwxODEuNTMsMjU0LjI1Wk0xOTIsNjkuODksMTE1LjQ4LDEyOCwxOTIsMTg2LjEyWiIvPjwvbWFzaz48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIxMjcuODQiIHkxPSIyNTUuNDIiIHgyPSIxMjcuODQiIHkyPSIwLjc0IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEsIDAsIDAsIC0xLCAwLCAyNTYuMDgpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+QXJ0Ym9hcmQgMTwvdGl0bGU+PGcgY2xhc3M9ImIiPjxwYXRoIGNsYXNzPSJjIiBkPSJNMjQ2Ljk0LDI3LjY0LDE5NC4xOSwyLjI0QTE1Ljk0LDE1Ljk0LDAsMCwwLDE3Niw1LjMzTDMuMzIsMTYyLjc3YTEwLjY3LDEwLjY3LDAsMCwwLDAsMTUuNzhsMTQuMSwxMi44MmExMC42NywxMC42NywwLDAsMCwxMy42Mi42MUwyMzksMzQuMjNhMTAuNTksMTAuNTksMCwwLDEsMTcsOC40NHYtLjYyQTE2LDE2LDAsMCwwLDI0Ni45NCwyNy42NFoiLz48cGF0aCBjbGFzcz0iZCIgZD0iTTI0Ni45NCwyMjguMzZsLTUyLjc1LDI1LjRBMTUuOTQsMTUuOTQsMCwwLDEsMTc2LDI1MC42N0wzLjMyLDkzLjIzYTEwLjY3LDEwLjY3LDAsMCwxLDAtMTUuNzhsMTQuMS0xMi44MkExMC42NywxMC42NywwLDAsMSwzMS4wNiw2NEwyMzksMjIxLjc3YTEwLjU5LDEwLjU5LDAsMCwwLDE3LTguNDRWMjE0QTE2LDE2LDAsMCwxLDI0Ni45NCwyMjguMzZaIi8+PHBhdGggY2xhc3M9ImUiIGQ9Ik0xOTQuMiwyNTMuNzZhMTYsMTYsMCwwLDEtMTguMi0zLjA5QTkuMzcsOS4zNywwLDAsMCwxOTIsMjQ0VjEyYTkuMzcsOS4zNywwLDAsMC0xNi02LjYzLDE2LDE2LDAsMCwxLDE4LjItMy4wOUwyNDYuOTMsMjcuNkExNiwxNiwwLDAsMSwyNTYsNDJWMjE0YTE2LDE2LDAsMCwxLTkuMDcsMTQuNDJaIi8+PGcgY2xhc3M9ImYiPjxwYXRoIGNsYXNzPSJnIiBkPSJNMTgxLjM4LDI1NC4yNWExNS45MywxNS45MywwLDAsMCwxMi43LS40OWw1Mi43LTI1LjM2QTE2LDE2LDAsMCwwLDI1NS44NCwyMTRWNDJhMTYsMTYsMCwwLDAtOS4wNi0xNC40MkwxOTQuMDgsMi4yNEExNiwxNiwwLDAsMCwxNzcuOCwzLjdhMTYuMywxNi4zLDAsMCwwLTEuOTEsMS42M0w3NSw5Ny4zOSwzMSw2NGExMC42NSwxMC42NSwwLDAsMC0xMy42MS42MUwzLjMzLDc3LjQ1YTEwLjY4LDEwLjY4LDAsMCwwLDAsMTUuNzhMNDEuNDQsMTI4LDMuMzIsMTYyLjc3YTEwLjY4LDEwLjY4LDAsMCwwLDAsMTUuNzhsMTQuMSwxMi44MkExMC42NSwxMC42NSwwLDAsMCwzMSwxOTJMNzUsMTU4LjYxbDEwMC45LDkyLjA2QTE1Ljk0LDE1Ljk0LDAsMCwwLDE4MS4zOCwyNTQuMjVabTEwLjUtMTg0LjM2TDExNS4zMiwxMjhsNzYuNTYsNTguMTJaIi8+PC9nPjwvZz48L3N2Zz4=" alt="Visual Studio Marketplace Version" /></a>
<a href="https://marketplace.visualstudio.com/items?itemName=antfu.vue-i18n-ally"><img src="https://img.shields.io/visual-studio-marketplace/d/antfu.vue-i18n-ally.svg" alt="Visual Studio Marketplace Downloads" /></a>
<a href="https://marketplace.visualstudio.com/items?itemName=antfu.vue-i18n-ally"><img src="https://img.shields.io/visual-studio-marketplace/i/antfu.vue-i18n-ally.svg" alt="Visual Studio Marketplace Installs" /></a>
<a href="https://github.com/antfu/vue-i18n-ally"><img src="https://img.shields.io/github/last-commit/antfu/vue-i18n-ally.svg" alt="GitHub last commit" /></a>
<a href="https://github.com/antfu/vue-i18n-ally/issues"><img src="https://img.shields.io/github/issues/antfu/vue-i18n-ally.svg" alt="GitHub issues" /></a>
</p>

<p align='center'>
Now with <a href="https://github.com/antfu/vue-i18n-ally#-experimental-sfc-support">Single File Component</a> support! 🎉
</p>

<h2 align="center"> ⚡ Features </h2>

<h3 align="center"> Inline annotation </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/annotation.png?raw=true' width='700px'/>
</p>

<h3 align="center"> Hover & Direct actions </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/hover.png?raw=true' width='600px'/>
</p>


<h3 align="center"> Manage all translations in one place </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/progress_report.png?raw=true' width='600px'/>
</p>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/manage.png?raw=true' width='600px'/>
</p>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/missing_keys.png?raw=true' width='600px'/>
</p>


<h3 align="center"> Translations missing report </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/problems.png?raw=true' width='500px'/>
</p>


<h3 align="center"> Multiple formats supported </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/yaml_support.png?raw=true' width='500px'/>
</p>


<h3 align="center"> Refactors & Auto translate </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/refactor_translate.png?raw=true' width='500px'/>
</p>


<h3 align="center"> Extract translations from code </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/extract.png?raw=true' width='500px'/>
</p>

<h3 align="center"> Annonation for JSON and YAML </h3>

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/locale-annotation.png?raw=true' width='600px'/>
</p>


<h3 align="center"> Overview </h3>

- Multi-root workspace supported
- Remote development supported
- Supports both [`vue-i18n`](https://github.com/kazupon/vue-i18n), [`vuex-i18n`](https://github.com/dkfbasel/vuex-i18n), [`vue-i18next`](https://github.com/panter/vue-i18next) and [`nuxt-i18n`](https://github.com/nuxt-community/nuxt-i18n)
- i18n for the extension itself, of course. **(supporting: English, 简体中文, 繁體中文 or [help us translate](https://github.com/antfu/vue-i18n-ally#-help-translate-this-extension))**

<p align="center">
<img src='https://github.com/antfu/vue-i18n-ally/blob/master/screenshots/overview.png?raw=true' width='700px'/>
</p>

## 📜 Supported Formats

| Format | Read | Write | Annonations | Note |
| --- | --- | --- | --- | --- |
| JSON | ✅ | ✅ | ✅ | |
| YAML | ✅ | ✅ | ✅ | *Comments will NOT preserved\** |
| JSON5 | ✅ | ✅ | ❌ | *Comments will NOT preserved\** |
| JavaScript | ✅ | ❌ | ❌ | *Forced in readonly mode* |
| TypeScript | ✅ | ❌ | ❌ | *Forced in readonly mode* |

*\* Due to the limitation of `yaml.dumps`([#196](https://github.com/nodeca/js-yaml/issues/196)) and `JSON5.stringify`([#177](https://github.com/json5/json5/issues/177)), **comments in YAML and JSON5 will be OMITTED** on any modification by this extension (editing, translating, etc). If you are using comments in your locale files, you can turn on readonly mode by `vue-i18n-ally.readonly` to prevent lossing comments.*

## 📂 Directory structure

You can have locales directory structured like this with zero-configuration

```
  locales         # i18n, langs, locale are also acceptable
  ├── en.json
  ├── de-DE.json
  ├── zh-CN.yml   # YAML
  ├── zh-TW.ts    # You can mix different formats
  ├── ...
  └── <contry-code>.json
```

or

```
  locales
  ├── en
  |   ├── common.json
  |   ├── buttons.json
  |   ├── ...
  |   └── <filenames>.json
  ├── de-DE
  |   ├── common.json
  |   ├── buttons.json
  |   └── ...
  └── <contry-code>
      ├── common.json
      ├── buttons.json
      └── ...
```


## ⚙ Common Configurations

All fields should add prefix "`vue-i18n-ally.`" in the setting.

| Field | Default | Description |
| --- | --- | --- |
| `sourceLanguage` | `en` | The primary locale for the project. It will also be the source language on translating. |
| `displayLanguage` | `en` | Displaying language in annotations and tree views. |
| `localesPaths` | Auto detect | Locales directory path, relative to root of the project. Can also be an array of paths. Glob patterns are acceptable. |
| `sortedKeys` | `false` | Sorting keys alphabetically on saving |
| `readonly` | `false` | Work on readonly mode. Translating and editing will be disabled. |
| `annotations` | `true` | Enabling inline annotations |


## 🔩 Advanced Configurations

| Field | Default | Description |
| --- | --- | --- |
| `filenameMatchRegex` | null | Accept a regex allows you to map the filenames. The first group in regex should be the locale code. |
| `forceEnabled` | `false` | Extension will on enabled when `vue-i18n`-ish dependencies is installed in the project. Turning on this option will force the extension enabled anyway. |
| `experimental.sfc` | `false` | Support for loading [Single File Components](http://kazupon.github.io/vue-i18n/guide/sfc.html) `<i18n>` section. Currently SFC only works in **READONLY** mode, the other features will be landed in future release. |


## 🌍 Help translate this extension

This extension itself supports i18n as well, it will be auto matched to the display language you used in your vscode editor. If you would like to help translate this extension, you can do it by following steps.

1. Fork this repo and clone it to you local machine
2. Copy `package.nls.json` to `package.nls.<locale-code>.json` in the root of the repo
3. Translate every single message in the new json file you created.
4. Commit changes and make a PR to this repo

We would recommend you to use vscode with `vue-i18n-ally` installed. It can helps you translate itself 😁, all the configs were already set in the workspace settings.


## 🎯 Troubleshooting

### Extension doesn't work/show up. There is no icon in activity bar

Extension will only be enabled on `vue-i18n`"-ish" project. Make sure you have one of the following package in the `dependencies` or `devDependencies` fields of your `package.json`
  - [`vue-i18n`](https://github.com/kazupon/vue-i18n)
  - [`vuex-i18n`](https://github.com/dkfbasel/vuex-i18n)
  - [`vue-i18next`](https://github.com/panter/vue-i18next)
  - [`nuxt-i18n`](https://github.com/nuxt-community/nuxt-i18n)

### I can see the icon in activity bar, but nothing show up

1. **Locales path config missing**. `locales` path will be detected automatically at the first time you open a project. If the nothing show up, you may need to configure it manually. There are two ways to do that:
   - Open **Command Palette** (`Ctrl-Shift-P` or `⌘⇧P`), type `Vue i18n Ally: Manual configure locales path` then press enter and follow the guide.
   - Goto to the settings of VSCode and set `vue-i18n-ally.localesPaths` manually.
2. **The source / displaying locale**. The default locale is set to English(`en`). If you don't have English in your supporting locales, you may need to config it through command `Vue i18n Ally: Change source language`
3. Check your **Directory structure**


### 🗂 Advanced folder directory configurations

In some cases, you may use modules, monorepo or other philosophies to organize your locale files.

**For example**, you have following directory structure need to be config.

```
  packages
  ├── pkgA
  |   └── i18n
  |       ├── en.messages.json
  |       ├── zh-CN.messages.json
  |       └── ...
  ├── pkgB
  |   └── i18n
  |       ├── en.messages.json
  |       ├── zh-CN.messages.json
  |       └── ...
  └── ...
```

You could change your config like this:

```json
{
  "vue-i18n-ally.localesPaths": [
    "packages/**/**/i18n"
  ],
  "vue-i18n-ally.filenameMatchRegex": "^([\\w-]*)\\.messages\\.json",
}
```


## 📅 TODOs

We have not determined schedule to implement the TODOs. If you would like to see them implemented, please open an issue and share your use cases. PR is also welcome.

Todo:
- [ ] Tests
- [ ] Live share support
- [ ] `esm` hot reloading, #97
- [ ] Enhance SFC support

Done:
- [x] Machine translating
- [x] Locales Tree
- [x] Translating progress
- [x] Workspace support
- [x] YAML support
- [x] `$tc`, `$d`, `$n`, `v-t` support
- [x] Hide/Show specific locales
- [x] Language flags
- [x] Goto definition
- [x] Source language indicator
- [x] i18n for the plugin itself
- [x] Annoation config (on/off, maxlength)
- [x] Option to force enabling on non-vue-i18n project
- [x] Find all references
- [x] Loading `.js` locales
- [x] Loading `.ts` locales
- [x] Analysis report
- [x] JSON/YAML file annonation & hint
- [x] [Single File Components i18n support](http://kazupon.github.io/vue-i18n/guide/sfc.html)

## 👨‍💻 Thanks

This extension is original forked from [think2011/vscode-vue-i18n](https://github.com/think2011/vscode-vue-i18n), it can't be existed without [@think2011](https://github.com/think2011)'s great work.

And thanks for all [the awesome contributors](https://github.com/antfu/vue-i18n-ally/graphs/contributors).

## License

[MIT License](https://github.com/antfu/vue-i18n-ally/blob/master/LICENSE) © 2019 [Anthony Fu](https://github.com/antfu)

MIT License © 2018-2019 [think2011](https://github.com/think2011)
